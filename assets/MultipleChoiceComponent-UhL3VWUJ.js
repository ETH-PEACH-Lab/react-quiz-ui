import{j as p}from"./DiffCodeComponent-BdQJpqcX.js";import{r as a}from"./index-BBkUAzwr.js";import{a as _}from"./MultipleChoiceItemComponent-BjZnfbmj.js";const b=r=>r.map(e=>({value:e,sort:Math.random()})).sort((e,m)=>e.sort-m.sort).map(({value:e})=>e),x=({exerciseObject:r,initialAnswer:e,onAnswerChanges:m})=>{var f,l;const i=a.useId(),[M,v]=a.useState(r.items),o=r,[s,d]=a.useState((e==null?void 0:e.answer)??[]);a.useEffect(()=>{d((e==null?void 0:e.answer)??[])},[e==null?void 0:e.answer]),a.useEffect(()=>{var t;v((t=r.metadata)!=null&&t.random?b(r.items):r.items)},[r.items.length,(f=r.metadata)==null?void 0:f.random]);const S=a.useMemo(()=>s.filter(t=>!o.correctAnswers.includes(t)).concat(o.correctAnswers.filter(t=>!s.includes(t))),[o.correctAnswers,s]);a.useEffect(()=>{m({...e,answer:s})},[s,m]);const T=(t,c)=>{var n;if(!((n=o.metadata)!=null&&n.multi)){d([t]);return}if(!c){d(s.filter(u=>u!==t));return}d([...s,t])},k=t=>o.correctAnswers.length>0&&S.includes(t.id),q=((l=o.metadata)!=null&&l.random?M:o.items).map(t=>{var c,n,u,h,I,g,C,E,w,y;return p.jsx(_,{onChange:T,parentId:i,item:t,config:{multi:(c=o.metadata)==null?void 0:c.multi,incorrectSelection:k(t),disabled:(n=o.metadata)==null?void 0:n.disabled,checked:s.includes(t.id),markdownConfig:(u=o.metadata)==null?void 0:u.markdownConfig,coloring:(h=o.metadata)==null?void 0:h.multipleChoiceItemColoring,showEvaluation:(I=o.metadata)==null?void 0:I.showEvaluation,showIndicator:(g=o.metadata)==null?void 0:g.showIndicator,distribution:{show:(E=(C=o.metadata)==null?void 0:C.distribution)==null?void 0:E.show,number:((y=(w=o.metadata)==null?void 0:w.distribution)==null?void 0:y.perItem[t.id])??0},valid:o.correctAnswers.includes(t.id)}},i+"_"+t.id)});return p.jsx(p.Fragment,{children:q})};x.__docgenInfo={description:"",methods:[],displayName:"MultipleChoiceComponent",props:{exerciseObject:{required:!0,tsType:{name:"T"},description:""},onAnswerChanges:{required:!0,tsType:{name:"signature",type:"function",raw:"(answer: E) => void",signature:{arguments:[{type:{name:"E"},name:"answer"}],return:{name:"void"}}},description:""},initialAnswer:{required:!0,tsType:{name:"E"},description:""}}};export{x as M};
